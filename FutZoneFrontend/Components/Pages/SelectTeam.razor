@page "/select-team"

<div class="select-team-container">
    <div class="header-section">
        <h1 class="title">Elige tu Equipo</h1>
        <p class="subtitle">Selecciona el equipo con el que jugarás y personaliza tu experiencia.</p>
    </div>

    <div class="team-grid">
        @foreach (var team in _teams)
        {
            <div class="team-card @(team.Abreviatura == _selectedTeamAbbreviation ? "selected" : "")" @onclick="() => HandleSelectTeam(team.Abreviatura)">
                <div class="team-logo-container">
                    <img src="@team.LogoUrl" alt="@team.Nombre" class="team-logo">
                </div>
                <div class="team-info">
                    <h4 class="team-name">@team.Nombre</h4>
                    <p class="team-abbreviation">@team.Abreviatura</p>
                </div>
            </div>
        }
    </div>

    @if (!string.IsNullOrEmpty(_selectedTeamAbbreviation))
    {
        <div class="selected-team-confirmation">
            <p>Has seleccionado a <strong>@_selectedTeamName</strong>. ¡Prepárate para la victoria!</p>
            <button class="btn btn-primary btn-lg continue-button">Continuar</button>
        </div>
    }
</div>

@code {
    private string _selectedTeamAbbreviation = "";
    private string _selectedTeamName = "";

    private List<Team> _teams = new();

    protected override async Task OnInitializedAsync()
    {
        _teams = new List<Team>
        {
            new Team { Nombre = "Barcelona", Abreviatura = "BAR", LogoUrl = "/images/teams/barcelona.png" },
            new Team { Nombre = "Real Madrid", Abreviatura = "RMD", LogoUrl = "/images/teams/real_madrid.png" },
            new Team { Nombre = "Manchester United", Abreviatura = "MUN", LogoUrl = "/images/teams/man_united.png" },
            new Team { Nombre = "Liverpool", Abreviatura = "LIV", LogoUrl = "/images/teams/liverpool.png" },
            new Team { Nombre = "Bayern Munich", Abreviatura = "BAY", LogoUrl = "/images/teams/bayern_munich.png" },
            new Team { Nombre = "Paris Saint-Germain", Abreviatura = "PSG", LogoUrl = "/images/teams/psg.png" },
            new Team { Nombre = "Juventus", Abreviatura = "JUV", LogoUrl = "/images/teams/juventus.png" },
            new Team { Nombre = "AC Milan", Abreviatura = "ACM", LogoUrl = "/images/teams/ac_milan.png" }
        };
        await Task.CompletedTask;
    }

    private void HandleSelectTeam(string abreviatura)
    {
        var team = _teams.FirstOrDefault(t => t.Abreviatura == abreviatura);
        if (team != null)
        {
            _selectedTeamAbbreviation = team.Abreviatura;
            _selectedTeamName = team.Nombre;
        }
    }

    private class Team
    {
        public string Nombre { get; set; } = "";
        public string Abreviatura { get; set; } = "";
        public string LogoUrl { get; set; } = "";
    }
}
